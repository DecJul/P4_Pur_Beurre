CREATE TABLE products (
	id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	product_name VARCHAR(255),
	_id VARCHAR(30) NOT NULL,
	nutriscore VARCHAR(15),
	sugar VARCHAR(15),
	salt VARCHAR(15),
	fat VARCHAR(31),
	energy VARCHAR(31),
	UNIQUE INDEX idprod (_id),
	FULLTEXT INDEX search (product_name))
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



CREATE TABLE accounts (
	id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	username VARCHAR(30) NOT NULL,
	password VARCHAR(30),
	UNIQUE INDEX USERNAME (username)
	)
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



CREATE TABLE categories (
	id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	category VARCHAR(255) NOT NULL,
	id_product VARCHAR(30) NOT NULL,
	UNIQUE INDEX IDPROD_CAT (id_product, category)
	)
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



CREATE TABLE ingredients (
	id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	ingredient_name VARCHAR(255) NOT NULL,
	rank VARCHAR(15),
	percent DECIMAL(10.0),
	id_product VARCHAR(30) NOT NULL,
	UNIQUE INDEX IDPROD_ING (ingredient_name, id_product)
	)
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



CREATE TABLE products_saved (
	id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	product VARCHAR(30) NOT NULL,
	user VARCHAR(30) NOT NULL,
	UNIQUE INDEX PRODSAVED (product, user)
	)
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



CREATE TABLE substituts (
	id INT(11) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
	id_product VARCHAR(30),
	sugar TINYINT(1),
	salt TINYINT(1),
	fat TINYINT(1),
	energy TINYINT(1),
	nutriscore TINYINT(1),
	searchscore INT(3),
	address VARCHAR(255)
	)
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
